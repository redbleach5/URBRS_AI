–í–æ–∑–º–æ–∂–Ω–æ –¥–ª—è ollama Qwen3 –¥–ª—è –∫–æ–¥–∞ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏. gemma3 –¥–ª—è –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ. –î–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤—ã—Å–æ–∫–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º gemma3 –ª—É—á—à–µ, —á–µ–º qwen3, –ø–æ—Ç–æ–º—É —á—Ç–æ qwen3 –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ KV-–∫—ç—à–∞.

https://www.reddit.com/r/LocalLLaMA/comments/1pswyjm/spent_weekend_tuning_llm_server_to_hone_my/?tl=ru

# –ü—Ä–æ–±–ª–µ–º—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

### 1. XSS —á–µ—Ä–µ–∑ `dangerouslySetInnerHTML`
**–§–∞–π–ª:** `frontend/src/components/UnifiedChat.tsx:1902-1907`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ `dangerouslySetInnerHTML` –±–µ–∑ –ø–æ–ª–Ω–æ–π —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏. LLM-–æ—Ç–≤–µ—Ç—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π JavaScript.  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DOMPurify: `DOMPurify.sanitize(renderMarkdown(message.content))`

### 2. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π iframe –±–µ–∑ sandbox
**–§–∞–π–ª:** `frontend/src/components/UnifiedChat.tsx:1168-1173`  
**–ü—Ä–æ–±–ª–µ–º–∞:** HTML-–∫–æ–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ iframe –±–µ–∑ sandbox –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π JS –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ localStorage —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–∫–Ω–∞.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `sandbox="allow-scripts allow-same-origin"` –≤ iframe

---

## üü† –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 3. API Base URL –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç CORS
**–§–∞–π–ª:** `frontend/src/api/client.ts:3`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `localhost:8000`, –Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ —É–∫–∞–∑–∞–Ω `192.168.178.126`. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω–µ CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç 8000 –≤ origins –∫–æ–Ω—Ñ–∏–≥–∞ CORS

### 4. –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ blob URL
**–§–∞–π–ª:** `frontend/src/components/UnifiedChat.tsx:710-719`  
**–ü—Ä–æ–±–ª–µ–º–∞:** Cleanup blob URL –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ unmount. –ü—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö URL –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å cleanup –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `codeExecutionResults`

### 5. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç WebSocket –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
**–§–∞–π–ª:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (WebSocket –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `backend/main.py` –µ—Å—Ç—å endpoint `/ws`, –Ω–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ REST. –ù–µ—Ç real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.  
**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### 6. Feedback —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ UI
**–§–∞–π–ª:** `frontend/src/api/client.ts:387-404`  
**–ü—Ä–æ–±–ª–µ–º–∞:** API `submitFeedback` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –≤ UI –Ω–µ—Ç –∫–Ω–æ–ø–æ–∫ –æ—Ü–µ–Ω–∫–∏ (üëç/üëé). –§—É–Ω–∫—Ü–∏—è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å UI —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è feedback –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

---

## üü° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

### 7. –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç UnifiedChat.tsx (2278 —Å—Ç—Ä–æ–∫)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞—Ä—É—à–∞–µ—Ç Single Responsibility: —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, markdown, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –º–æ–¥–µ–ª–∏.  
**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ `ChatMessage.tsx`, `CodeExecutor.tsx`, `MarkdownRenderer.tsx`, `ModelSelector.tsx`, `ConversationSidebar.tsx`

### 8. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–¥–∞
**–§–∞–π–ª:** `frontend/src/components/UnifiedChat.tsx:14-149`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–æ–π: `extractCodeFromMarkdown()`, `parseCodeBlocks()`, `detectCodeType()`. –î—É–±–ª–∏—Ä—É—é—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∏ HTML/CSS/JS.  
**–†–µ—à–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –∫–ª–∞—Å—Å `CodeParser` —Å –º–µ—Ç–æ–¥–∞–º–∏ `extract()`, `detectType()`, `validate()`

### 9. Hardcoded timeout –∑–Ω–∞—á–µ–Ω–∏—è
**–§–∞–π–ª:** `frontend/src/api/client.ts`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ hardcoded timeout (600000, 120000, 5000, 10000, 15000).  
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ `TIMEOUT_CONFIG` –æ–±—ä–µ–∫—Ç

### 10. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ offline —Ä–µ–∂–∏–º–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–µ—Ç–∏ —Ç–æ–ª—å–∫–æ –æ–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ. –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, retry, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ offline.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å Service Worker –∏ offline-first –ø–æ–¥—Ö–æ–¥

---

## üü¢ –£–ª—É—á—à–µ–Ω–∏—è

### 11. –ù–µ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
**–§–∞–π–ª:** `frontend/src/components/UnifiedChat.tsx`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –±–µ–∑ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏. –ü—Ä–∏ 100+ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –≤–æ–∑–º–æ–∂–Ω—ã —Ç–æ—Ä–º–æ–∑–∞.  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `react-window` –∏–ª–∏ `react-virtualized`

### 12. –°–º–µ—à–∞–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (RU/EN)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–º–µ—Å—å —è–∑—ã–∫–æ–≤: `'–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç', '–ó–∞–¥–∞—á–∏', 'Agents'`, `'–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:', 'completed'`.  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å i18n –±–∏–±–ª–∏–æ—Ç–µ–∫—É (react-intl, react-i18next)

### 13. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Error Boundary
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–µ—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å "–∫—Ä–∞—à–∏—Ç—Å—è" –±–µ–∑ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å Error Boundary —Å fallback UI –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 14. QueryClient –±–µ–∑ retry
**–§–∞–π–ª:** `frontend/src/App.tsx:7`  
**–ü—Ä–æ–±–ª–µ–º–∞:** `new QueryClient()` —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏. –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏.  
**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `retry: 3`, `retryDelay`, `staleTime`

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

### 15. Chat –∏ IDE –Ω–µ –¥–µ–ª—è—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
**–§–∞–π–ª—ã:** `frontend/src/components/UnifiedChat.tsx`, `frontend/src/components/IDE.tsx`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∫–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ. Chat –Ω–µ –∑–Ω–∞–µ—Ç –æ `projectPath` –∏–∑ IDE, –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.  
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–π `ProjectStore` (Zustand) –¥–ª—è `projectPath` –∏ `projectTree`  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (2-3 —á–∞—Å–∞)

### 16. –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ 10 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
**–§–∞–π–ª:** `backend/api/routers/chat.py:115`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π: `chat_request.history[-10:]`. –ú–æ–¥–µ–ª—å "–∑–∞–±—ã–≤–∞–µ—Ç" –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –¥–ª–∏–Ω–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö.  
**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ LLM, –¥–æ–±–∞–≤–ª—è—Ç—å summary –≤ system prompt  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (2-4 —á–∞—Å–∞)

### 17. LongTermMemory –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
**–§–∞–π–ª—ã:** `backend/memory/long_term.py`, `backend/orchestrator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞–º—è—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ—à–µ–Ω–∏—è –∏ feedback, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏, –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏/–∞–≥–µ–Ω—Ç–∞, –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫.  
**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ Chat –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏, —É—á–∏—Ç—ã–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ—à–∏–±–æ–∫, –ø—Ä–∏–º–µ–Ω—è—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (4-8 —á–∞—Å–æ–≤)

### 18. –ù–µ—Ç –º–µ–∂—Å–µ—Å—Å–∏–æ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Ç–µ—Ä—è–µ—Ç—Å—è: —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∫–æ–¥–∞ (—Ç–∞–±—ã/–ø—Ä–æ–±–µ–ª—ã), —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ç–∏–ø–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏.  
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `UserProfile` (`backend/memory/user_profile.py`) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∏–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (6-10 —á–∞—Å–æ–≤)

### 19. –ê–≥–µ–Ω—Ç—ã –Ω–µ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
**–§–∞–π–ª:** `backend/api/project/smart_analyzer.py:551-577`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –º—É–ª—å—Ç–∏-–∞–≥–µ–Ω—Ç–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ—Å—Ç–æ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è, –Ω–æ –Ω–µ —Å–∏–Ω—Ç–µ–∑–∏—Ä—É—é—Ç—Å—è.  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–ø —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ LLM –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤—ã–≤–æ–¥–æ–≤ —Ä–∞–∑–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (3-5 —á–∞—Å–æ–≤)

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–±—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏)

–ë—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏ (qwen2.5:1.5b, llama3.2:1b, gemma2:2b) –º–æ–≥—É—Ç —É—Å–∫–æ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–∞ 30-50%.

### ‚úÖ –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏
- `LLMClassifier` (`backend/core/llm_classifier.py`)
- `TwoStageProcessor` (`backend/core/two_stage_processor.py`)

### üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å

#### 20. –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á
**–§–∞–π–ª:** `backend/orchestrator.py:383-442`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å —Å `thinking_mode=True` –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á.  
**–†–µ—à–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ—Å—Ç—É—é/—Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É, –ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö  
**–í—ã–∏–≥—Ä—ã—à:** ~70% –∑–∞–¥–∞—á –ø—Ä–æ—Å—Ç—ã–µ, —ç–∫–æ–Ω–æ–º–∏—è 1-3 —Å–µ–∫/–∑–∞–¥–∞—á—É

#### 21. –†–µ—Ñ–ª–µ–∫—Å–∏—è –∞–≥–µ–Ω—Ç–æ–≤
**–§–∞–π–ª:** `backend/agents/reflection_mixin.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.  
**–†–µ—à–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞, –ø–æ–ª–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
**–í—ã–∏–≥—Ä—ã—à:** –ü—Ä–æ–ø—É—Å–∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –¥–ª—è ~60% —Ö–æ—Ä–æ—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —ç–∫–æ–Ω–æ–º–∏—è 2-5 —Å–µ–∫

#### 22. –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
**–§–∞–π–ª:** `backend/rag/context_summarizer.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Ñ—Ä–∞–∑.  
**–†–µ—à–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —ç–∫—Å—Ç—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–ª–Ω–∞—è –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ

#### 23. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ —Ä–µ—Ñ–ª–µ–∫—Å–∏–µ–π
**–§–∞–π–ª:** `backend/agents/code_writer.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ–ª–Ω–æ–π –º–æ–¥–µ–ª—å—é.  
**–†–µ—à–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–π –º–æ–¥–µ–ª—å—é, –∑–∞—Ç–µ–º –ø–æ–ª–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –ª–æ–≥–∏–∫–∏

#### 24. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
**–§–∞–π–ª:** `backend/core/task_router.py:73-126`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∏–ø–∞/—Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏.  
**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `LLMClassifier` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—ã—Å—Ç—Ä–æ–π –º–æ–¥–µ–ª–∏  
**–í—ã–∏–≥—Ä—ã—à:** –≠–∫–æ–Ω–æ–º–∏—è 0.5-1 —Å–µ–∫/–∑–∞–¥–∞—á—É

#### 25. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ Chat API
**–§–∞–π–ª:** `backend/api/routers/chat.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ.  
**–†–µ—à–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (greeting/question/task), –ø—Ä–æ—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å  
**–í—ã–∏–≥—Ä—ã—à:** ~20% —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–æ—Å—Ç—ã–µ, —ç–∫–æ–Ω–æ–º–∏—è 2-5 —Å–µ–∫/—Å–æ–æ–±—â–µ–Ω–∏–µ

#### 26. TwoStageProcessor –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
**–§–∞–π–ª:** `backend/core/two_stage_processor.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `code_writer.py`.  
**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `ResearchAgent`, `DataAnalysisAgent`, `SmartProjectAnalyzer`

### üìä –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –ß–∞—Å—Ç–æ—Ç–∞ | –≠–∫–æ–Ω–æ–º–∏—è | –í—ã–∏–≥—Ä—ã—à |
|-------------|---------|----------|---------|
| –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è (–ø—Ä–æ—Å—Ç—ã–µ) | 70% | 1-3 —Å–µ–∫ | ~2 —Å–µ–∫/–∑–∞–¥–∞—á—É |
| –ü—Ä–æ–ø—É—Å–∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ | 60% | 2-5 —Å–µ–∫ | ~2 —Å–µ–∫/–∑–∞–¥–∞—á—É |
| –ë—ã—Å—Ç—Ä—ã–µ greeting | 20% | 2-5 —Å–µ–∫ | ~0.6 —Å–µ–∫/—Å–æ–æ–±—â–µ–Ω–∏–µ |
| –ë—ã—Å—Ç—Ä–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è | 100% | 0.5-1 —Å–µ–∫ | ~0.7 —Å–µ–∫/–∑–∞–¥–∞—á—É |
| –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ | 40% | 1-2 —Å–µ–∫ | ~0.6 —Å–µ–∫/–≥–µ–Ω–µ—Ä–∞—Ü–∏—é |

**–ò—Ç–æ–≥–æ:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ **30-50%** –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

---

## –°–≤–æ–¥–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------|------------|-----------|
| üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ | 2 | –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ |
| üü† –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ | 4 | –í—ã—Å–æ–∫–∏–π |
| üü° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ | 4 | –°—Ä–µ–¥–Ω–∏–π |
| üü¢ –£–ª—É—á—à–µ–Ω–∏—è | 4 | –ù–∏–∑–∫–∏–π |
| üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ | 5 | –°—Ä–µ–¥–Ω–∏–π-–í—ã—Å–æ–∫–∏–π |
| ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | 7 | –°—Ä–µ–¥–Ω–∏–π |
